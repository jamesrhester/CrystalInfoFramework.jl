<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Guide · CrystalInfoFramework documentation</title><meta name="title" content="Guide · CrystalInfoFramework documentation"/><meta property="og:title" content="Guide · CrystalInfoFramework documentation"/><meta property="twitter:title" content="Guide · CrystalInfoFramework documentation"/><meta name="description" content="Documentation for CrystalInfoFramework documentation."/><meta property="og:description" content="Documentation for CrystalInfoFramework documentation."/><meta property="twitter:description" content="Documentation for CrystalInfoFramework documentation."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">CrystalInfoFramework documentation</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Overview</a></li><li class="is-active"><a class="tocitem" href>Guide</a><ul class="internal"><li><a class="tocitem" href="#Reading-a-CIF-file"><span>Reading a CIF file</span></a></li><li><a class="tocitem" href="#Updating-a-CIF-file"><span>Updating a CIF file</span></a></li><li><a class="tocitem" href="#Writing-CIFs"><span>Writing CIFs</span></a></li><li><a class="tocitem" href="#Dictionaries"><span>Dictionaries</span></a></li></ul></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Guide</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Guide</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/jamesrhester/CrystalInfoFramework.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/jamesrhester/CrystalInfoFramework.jl/blob/master/docs/src/tutorial.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Guide"><a class="docs-heading-anchor" href="#Guide">Guide</a><a id="Guide-1"></a><a class="docs-heading-anchor-permalink" href="#Guide" title="Permalink"></a></h1><p>The CIF files used in these examples are provided in the <code>docs</code> directory.</p><h2 id="Reading-a-CIF-file"><a class="docs-heading-anchor" href="#Reading-a-CIF-file">Reading a CIF file</a><a id="Reading-a-CIF-file-1"></a><a class="docs-heading-anchor-permalink" href="#Reading-a-CIF-file" title="Permalink"></a></h2><p>To open CIF file <code>demo.cif</code>, and read <code>_cell.length_a</code> from block <code>saly2_all_aniso</code>:</p><pre><code class="language-julia hljs">
using CrystalInfoFramework

nc = Cif(&quot;demo.cif&quot;)
my_block = nc[&quot;saly2_all_aniso&quot;]  #could also use first(nc).second
my_block[&quot;_cell.length_a&quot;]

# output

1-element Vector{String}:
 &quot;11.520(12)&quot;</code></pre><p>Note that values are <em>always</em> returned as <code>Array</code> type, with the value for a key value pair being a single-element array. The values in the arrays returned are either <code>String</code>, <code>Missing</code> (CIF <code>?</code>), <code>Nothing</code> (CIF <code>.</code>) or compound types <code>Dict</code> and <code>Array</code> which are only available for CIF2 syntax files.</p><h3 id="Loops"><a class="docs-heading-anchor" href="#Loops">Loops</a><a id="Loops-1"></a><a class="docs-heading-anchor-permalink" href="#Loops" title="Permalink"></a></h3><p>Individual columns are returned when the data name is requested, as above.</p><p><a href="../api/#CrystalInfoFramework.get_loop"><code>get_loop</code></a> returns a <code>DataFrame</code> object that can be manipulated using the  methods of that package, most obviously, <code>eachrow</code> to iterate over the packets in a loop. To specify the required loop, simply provide any  data name that appears in the loop.</p><pre><code class="language-julia hljs">
l = get_loop(my_block,&quot;_atom_site.label&quot;);

for r in eachrow(l)
    println(&quot;$(r[Symbol(&quot;_atom_site.fract_x&quot;)])&quot;)
end

# output

.5505(5)
.4009(5)
.2501(5)
.4170(7)
.3145(7)
.2789(8)
.3417(9)
.4445(9)
.4797(8)
.4549(7)</code></pre><h2 id="Updating-a-CIF-file"><a class="docs-heading-anchor" href="#Updating-a-CIF-file">Updating a CIF file</a><a id="Updating-a-CIF-file-1"></a><a class="docs-heading-anchor-permalink" href="#Updating-a-CIF-file" title="Permalink"></a></h2><p>Single key-value pairs are added in the same way as for a normal dictionary. </p><pre><code class="language-julia hljs">my_block[&quot;_new_item&quot;] = &quot;a fine item&quot;
my_block[&quot;_number_item&quot;] = 23</code></pre><p>If the dataname belongs to a loop, a two-step process is required to add the values. First the column of values for the new data name is added as above, and then the new dataname can be added to a previously-existing  loop. The following call adds <code>_new_loop_item</code> to the loop containing  <code>_old_item</code>:</p><pre><code class="language-julia hljs">my_block[&quot;_new_loop_item&quot;] = [1,2,3,4]
add_to_loop!(my_block,&quot;_old_item&quot;,&quot;_new_loop_item&quot;)</code></pre><p>The number of values in the array assigned to <code>_new_loop_item</code> must match the length of the loop it is added to - this is checked.</p><p>A completely new loop can be created with <a href="../api/#CrystalInfoFramework.create_loop!"><code>create_loop!</code></a>.  The columns corresponding to the data names provided to <code>create_loop!</code> must  have previously been added to the data block, just like for <a href="../api/#CrystalInfoFramework.add_to_loop!"><code>add_to_loop!</code></a>.</p><h2 id="Writing-CIFs"><a class="docs-heading-anchor" href="#Writing-CIFs">Writing CIFs</a><a id="Writing-CIFs-1"></a><a class="docs-heading-anchor-permalink" href="#Writing-CIFs" title="Permalink"></a></h2><p>To write a CIF, open an IO stream and write the contents of the <code>Cif</code> object as MIME type &quot;text/cif&quot;:</p><pre><code class="language-julia hljs">t = open(&quot;newcif.cif&quot;,&quot;w&quot;)
show(t,MIME(&quot;text/cif&quot;),mycif)
close(t)</code></pre><p>Note that currently no checks are made for correct construction of data names (e.g. leading underscore and characterset restrictions). This will be checked in the future.</p><h2 id="Dictionaries"><a class="docs-heading-anchor" href="#Dictionaries">Dictionaries</a><a id="Dictionaries-1"></a><a class="docs-heading-anchor-permalink" href="#Dictionaries" title="Permalink"></a></h2><p>CIF dictionaries are created by passing the dictionary file name to <a href="../api/#CrystalInfoFramework.DDLm_Dictionary"><code>DDLm_Dictionary</code></a> or <a href="../api/#CrystalInfoFramework.DDL2_Dictionary"><code>DDL2_Dictionary</code></a> constructors.  Note that DDL2 dictionaries are published by the Protein Data Bank (wwPDB) and DDLm dictionaries are used by the IUCr.</p><pre><code class="language-julia hljs">d = DDLm_Dictionary(&quot;cif_core.dic&quot;)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Overview</a><a class="docs-footer-nextpage" href="../api/">API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Wednesday 10 September 2025 06:01">Wednesday 10 September 2025</span>. Using Julia version 1.10.10.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
